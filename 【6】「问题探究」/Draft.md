



```
ClickHouse

优点：
1. ClickHouse写入吞吐量大，单服务器日志写入量在50MB到200MB/s，每秒写入超过60w记录数，是ES的5倍以上。
2. 查询速度快，官方宣称数据在pagecache中，单服务器查询速率大约在2-30GB/s；没在pagecache的情况下，查询速度取决于磁盘的读取速率和数据的压缩率。
3. ClickHouse比ES服务器成本更低。
	* 一方面ClickHouse的数据压缩比比ES高，相同数据占用的磁盘空间只有ES的1/3到1/30，节省了磁盘空间的同时，也能有效的减少磁盘IO；	* 另一方面ClickHouse比ES占用更少的内存，消耗更少的CPU资源。
4. 相比ES，ClickHouse稳定性更高，运维成本更低。
	* ES中不同的Group负载不均衡，有的Group负载高，会导致写Rejected等问题，需要人工迁移索引；
	* 在ClickHouse中通过集群和Shard策略，采用轮询写的方法，可以让数据比较均衡的分布到所有节点。
	* ES中一个大查询可能导致OOM的问题；
	* ClickHouse通过预设的查询限制，会查询失败，不影响整体的稳定性。
	* ES需要进行冷热数据分离，ClickHouse按天分partition，一般不需要考虑冷热分离，特殊场景用户确实需要冷热分离的，数据量也会小很多，ClickHouse自带的冷热分离机制就可以很好的解决。
5. ClickHouse采用SQL语法，比ES的DSL更加简单，学习成本更低。


缺点：
1. 由于是列式数据库，无法像ES一样提供全文检索功能。
2. 无法动态添加字段，需要提前定义好表schema。
3. 日志无法长期保存，历史数据需定期清理下线，如果有保存历史数据需求，需要通过迁移数据，采用ClickHouse_copier或者复制数据的方式实现。
4. ClickHouse查询速度快，能充分利用集群资源，但是无法支持高并发查询，默认配置qps为100。
5. Clickhouse并不适合许多小数据高频插入，批量写入日志会有一定延迟。





Elasticsearch最擅长的主要是完全搜索场景（where过滤后的记录数较少），在内存富裕运行环境下可以展现出非常出色的并发查询能力。但是在大规模数据的分析场景下（where过滤后的记录数较多），ClickHouse凭借极致的列存和向量化计算会有更加出色的并发表现，并且查询支持完备度也更好。ClickHouse的并发处理能力立足于磁盘吞吐，而Elasticsearch的并发处理能力立足于内存Cache，这使得两者的成本区间有很大差异，ClickHouse更加适合低成本、大数据量的分析场景，它能够充分利用磁盘的带宽能力。数据导入和存储成本上，ClickHouse更加具有绝对的优势。
```



ClickHouse

Elasticsearch是一个近实时的分布式搜索分析引擎







**Doris**

```
1. 使用更简单，如建表更简单，SQL标准支持更好， Join性能更好，导数功能更强大
2. 运维更简单，如灵活的扩缩容能力，故障节点自动恢复，社区提供的支持更好
3. 分布式更强，支持事务和幂等性导数，物化视图自动聚合，查询自动路由，全面元数据管理
```



**ClickHouse**

```
1. 性能更佳，导入性能和单表查询性能更好，同时可靠性更好
2. 功能丰富，非常多的表引擎，更多类型和函数支持，更好的聚合函数以及庞大的优化参数选项
3. 集群管理工具更多，更好多租户和配额管理，灵活的集群管理，方便的集群间迁移工具
```





















