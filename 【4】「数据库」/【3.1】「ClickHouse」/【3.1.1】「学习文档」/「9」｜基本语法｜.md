## 一、DDL

### 1. 移动表

![截屏2021-11-08 下午7.37.34](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午7.37.34.png)

![截屏2021-11-08 下午7.37.49](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午7.37.49.png)

### 2. 设置表属性

![截屏2021-11-08 下午7.39.41](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午7.39.41.png)



## 二、DML

### 1. 插入数据

![截屏2021-11-08 下午7.47.24](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午7.47.24.png)



### 2. 更新删除数据

<font color='red'>只有MergeTree引擎的数据才能修改</font>

**1）删除分区数据**

![截屏2021-11-08 下午7.52.34](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午7.52.34.png)

**2）条件删除数据**

![截屏2021-11-08 下午7.54.49](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午7.54.49.png)

**3）条件更新数据**

![截屏2021-11-08 下午7.56.03](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午7.56.03.png)



## 三、分区表

<font color='red'>目前只有MergeTree支持分区表</font>

**1. 底层数据存储**

![截屏2021-11-08 下午8.01.08](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.01.08.png)

![截屏2021-11-08 下午8.04.29](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.04.29.png)

**2. 复制分区**

![截屏2021-11-08 下午8.12.36](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.12.36.png)

**3. 卸载分区**

![截屏2021-11-08 下午8.15.19](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.15.19.png)

![截屏2021-11-08 下午8.17.05](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.17.05.png)

**4. 装载分区**

![截屏2021-11-08 下午8.18.13](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.18.13.png)



## 四、视图

**1. 普通视图**

![截屏2021-11-08 下午8.21.38](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.21.38.png)

**2. 物化视图**

插入数据的时候同步聚合，构建查询的立方体，同步明细表的数据

![截屏2021-11-08 下午8.25.09](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.25.09.png)

![截屏2021-11-08 下午8.28.12](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.28.12.png)

![截屏2021-11-08 下午8.32.43](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-08 下午8.32.43.png)

```
执行完上述CREATE MATERIALIZED VIEW语句后，通过SHOW TABLES语句查询，会发现有一张名为.inner.[物化视图名]的表，这就是持久化物化视图数据的表，当然我们是不会直接操作它的。
```

![img](https://raw.githubusercontent.com/Peiyang-Felix/PicGo/Typora-DataContent/img/webp)

## 五、关联查询

![截屏2021-11-10 上午10.21.00](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-10 上午10.21.00.png)

**-- 连接精度**

![截屏2021-11-10 上午10.03.07](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-10 上午10.03.07.png)

![截屏2021-11-10 上午10.03.38](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-10 上午10.03.38.png)



![截屏2021-11-10 上午10.24.47](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-10 上午10.24.47.png)

![截屏2021-11-10 上午10.25.01](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-10 上午10.25.01.png)

![截屏2021-11-10 上午10.25.15](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-10 上午10.25.15.png)

**asof**

![截屏2021-11-10 上午10.26.39](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-10 上午10.26.39.png)

![截屏2021-11-10 上午10.28.08](/Users/peiyang/Library/Application Support/typora-user-images/截屏2021-11-10 上午10.28.08.png)

